<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="~{base::Layout(~{::section})}">
<head>
    <meta charset="UTF-8">
    <title>My Profile</title>

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <style>
        .form-control:focus {
            border-color: #0d6efd;
            box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
            transition: all 0.3s ease-in-out;
        }

        .btn:hover {
            transform: scale(1.02);
            transition: 0.2s ease-in-out;
        }
    </style>
</head>
<body>
<section>
    <div class="container mt-5 p-4 bg-light">
        <div class="row justify-content-center">
            <div class="col-md-8">

                <!-- ðŸ§¾ Alerts -->
                <div th:if="${session.succMsg}" class="alert alert-success alert-dismissible fade show" role="alert">
                    [[${session.succMsg}]]
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    <th:block th:text="${@commonServiceImpl.removeSessionService()}"></th:block>
                </div>

                <div th:if="${session.errorMsg}" class="alert alert-danger alert-dismissible fade show" role="alert">
                    [[${session.errorMsg}]]
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    <th:block th:text="${@commonServiceImpl.removeSessionService()}"></th:block>
                </div>

                <!-- ðŸ‘¤ Profile Card -->
                <div class="card shadow-lg rounded-4 p-4 border-0 bg-white">
                    <h3 class="text-center text-primary fw-bold mb-3">
                        <i class="bi bi-person-circle"></i> My Profile
                    </h3>

                    <div class="text-center mb-4">
                        <img th:src=" ${user.imageName}" class="rounded-circle shadow-sm border"
                             style="width: 120px; height: 120px; object-fit: cover;" alt="Profile Image">
                    </div>

                    <form action="/UpdateProfile" enctype="multipart/form-data" method="post">
                        <input type="hidden" name="id" th:value="${user.id}">

                        <div class="row mb-3">
                            <label class="col-sm-4 col-form-label">Name</label>
                            <div class="col-sm-8"><input name="name" type="text" class="form-control" th:value="${user.name}"></div>
                        </div>

                        <div class="row mb-3">
                            <label class="col-sm-4 col-form-label">Mobile Number</label>
                            <div class="col-sm-8"><input name="number" type="text" class="form-control" th:value="${user.number}"></div>
                        </div>

                        <div class="row mb-3">
                            <label class="col-sm-4 col-form-label">Email ID</label>
                            <div class="col-sm-8"><input name="email" type="text" class="form-control" th:value="${user.email}" readonly></div>
                        </div>

                        <div class="row mb-3">
                            <label class="col-sm-4 col-form-label">Address</label>
                            <div class="col-sm-8"><input name="address" type="text" class="form-control" th:value="${user.address}"></div>
                        </div>

                        <div class="row mb-3">
                            <label class="col-sm-4 col-form-label">City</label>
                            <div class="col-sm-8"><input name="city" type="text" class="form-control" th:value="${user.city}"></div>
                        </div>

                        <div class="row mb-3">
                            <label class="col-sm-4 col-form-label">State</label>
                            <div class="col-sm-8"><input name="state" type="text" class="form-control" th:value="${user.state}"></div>
                        </div>

                        <div class="row mb-3">
                            <label class="col-sm-4 col-form-label">Pincode</label>
                            <div class="col-sm-8"><input name="pincode" type="number" class="form-control" th:value="${user.pincode}"></div>
                        </div>

                        <div class="row mb-3">
                            <label class="col-sm-4 col-form-label">Upload Image</label>
                            <div class="col-sm-8"><input name="image" type="file" class="form-control"></div>
                        </div>

                        <div class="row mb-3">
                            <label class="col-sm-4 col-form-label">Account Status</label>
                            <div class="col-sm-8"><input name="enabled" type="text" class="form-control" th:value="${user.enabled}" readonly></div>
                        </div>

                        <div class="row mb-4">
                            <label class="col-sm-4 col-form-label">Role</label>
                            <div class="col-sm-8"><input name="role" type="text" class="form-control" th:value="${user.role}" readonly></div>
                        </div>

                        <div class="text-center">
                            <button class="btn btn-primary btn-sm"><i class="bi bi-save2"></i> Update Profile</button>
                        </div>
                    </form>
                </div>

                <!-- ðŸ”’ Password Change Section -->
                <div class="card mt-5 p-4 shadow-sm border-0">
                    <h4 class="text-center text-secondary mb-4">
                        <i class="bi bi-key"></i> Change Password
                    </h4>

                    <form action="/updatePassword" method="post">
                        <div class="row mb-3">
                            <label class="col-sm-4 col-form-label">Current Password</label>
                            <div class="col-sm-8"><input name="currentPassword" type="password" class="form-control"></div>
                        </div>

                        <div class="row mb-3">
                            <label class="col-sm-4 col-form-label">New Password</label>
                            <div class="col-sm-8"><input name="newPassword" type="password" class="form-control"></div>
                        </div>

                        <div class="row mb-4">
                            <label class="col-sm-4 col-form-label">Confirm Password</label>
                            <div class="col-sm-8"><input name="password" type="password" class="form-control"></div>
                        </div>

                        <div class="text-center">
                            <button class="btn btn-outline-primary btn-sm"><i class="bi bi-check-circle"></i> Update Password</button>
                        </div>
                    </form>
                </div>

            </div>
        </div>
    </div>
</section>
</body>
</html>
